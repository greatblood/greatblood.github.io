"use strict";(self["webpackChunkcheck_work_view"]=self["webpackChunkcheck_work_view"]||[]).push([[30],{7851:function(e,t,a){a.d(t,{DT:function(){return W},F:function(){return u},Q1:function(){return F},XG:function(){return d},Yy:function(){return v},Z9:function(){return h},cY:function(){return i},eb:function(){return y},f5:function(){return k},fM:function(){return n},h8:function(){return _},hJ:function(){return b},oW:function(){return D},qe:function(){return c},sH:function(){return l},sw:function(){return s},t8:function(){return p},tQ:function(){return m},vm:function(){return C},vn:function(){return g},x4:function(){return o},yT:function(){return Z},yw:function(){return f},zd:function(){return w}});var r=a(8676);function o(e){return(0,r.Z)({url:"/teacher/login",method:"post",params:{},data:e})}function n(){return(0,r.Z)({url:"/teacher/getByToken",method:"get",params:{},data:{}})}function l(e){return(0,r.Z)({url:"/work/title/create",method:"post",params:{},data:e})}function u(e){return(0,r.Z)({url:"/work/title/delete",method:"delete",params:e,data:{}})}function s(e){return(0,r.Z)({url:"/work/title/update",method:"put",params:{},data:e})}function d(e){return(0,r.Z)({url:"/work/title/find",method:"get",params:e,data:{}})}function i(e){return(0,r.Z)({url:"/work/title/details",method:"get",params:e,data:{}})}function m(e){return(0,r.Z)({url:"/work/title/publish",method:"post",params:{},data:e})}function c(e){return(0,r.Z)({url:"/work/course/create",method:"post",params:{},data:e})}function p(e){return(0,r.Z)({url:"/work/course/delete",method:"delete",params:e,data:{}})}function h(e){return(0,r.Z)({url:"/work/course/update",method:"put",params:{},data:e})}function g(e){return(0,r.Z)({url:"/work/course/find",method:"get",params:e,data:{}})}function f(e){return(0,r.Z)({url:"/work/course/show/student",method:"get",params:e,data:{}})}function w(e){return(0,r.Z)({url:"/work/course/exitByTeacher",method:"delete",params:e,data:{}})}function k(e){return(0,r.Z)({url:"/work/course/details",method:"get",params:e,data:{}})}function _(e){return(0,r.Z)({url:"/work/work/findByTeacher",method:"get",params:e,data:{}})}function D(e){return(0,r.Z)({url:"/work/work/show/student",method:"get",params:e,data:{}})}function b(e){return(0,r.Z)({url:"/work/course/role/create",method:"post",params:{},data:e})}function y(e){return(0,r.Z)({url:"/work/course/role/delete",method:"delete",params:e,data:{}})}function F(e){return(0,r.Z)({url:"/work/course/role/update",method:"put",params:{},data:e})}function C(e){return(0,r.Z)({url:"/work/course/role/find",method:"get",params:e,data:{}})}function W(e){return(0,r.Z)({url:"/manager/function/findByCourse",method:"get",params:e})}function Z(e){return(0,r.Z)({url:"/work/course/update/student/role",method:"put",params:{},data:e})}function v(e){return(0,r.Z)({url:"/work/work/answer/details/teacher",method:"get",params:e,data:{}})}},8676:function(e,t,a){a.d(t,{Z:function(){return u}});a(7658);var r=a(4161);function o(){var e={token:sessionStorage.getItem("token"),user_id:sessionStorage.getItem("user_id"),type:sessionStorage.getItem("type")};return e}var n=a(7178);const l=r.Z.create({baseURL:"http://101.200.87.232:11002"});l.interceptors.request.use((e=>{var t=o();return""!=t.token&&(e.headers["token"]=t.token,e.headers["user_id"]=t.user_id,e.headers["type"]=t.type),e}),(e=>Promise.reject(e))),l.interceptors.response.use((e=>{if(console.log(e),401===e.data.code&&(console.log(1233),(0,n.z8)({message:e.data.msg,type:"error",duration:5e3}),router.push("/login")),400!==e.data.code)return e;(0,n.z8)({message:e.data.msg,type:"error",duration:5e3})}),(e=>{Promise.reject(e)}));var u=l},30:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var r=a(3396);const o={key:0,style:{display:"flex","flex-direction":"row-reverse","margin-top":"10px"}};function n(e,t,a,n,l,u){const s=(0,r.up)("el-input"),d=(0,r.up)("el-form-item"),i=(0,r.up)("el-option"),m=(0,r.up)("el-select"),c=(0,r.up)("el-button"),p=(0,r.up)("el-form"),h=(0,r.up)("el-card"),g=(0,r.up)("el-table-column"),f=(0,r.up)("el-table"),w=(0,r.up)("el-pagination"),k=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(h,{class:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{inline:!0,class:"headerForm",model:l.searchHeaderForm},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(s,{clearable:"",modelValue:l.searchHeaderForm.find,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchHeaderForm.find=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"课程类型"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{modelValue:l.searchHeaderForm.teacher_id,"onUpdate:modelValue":t[1]||(t[1]=e=>l.searchHeaderForm.teacher_id=e),clearable:"",placeholder:"请选择课程类型"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.options,(e=>((0,r.wg)(),(0,r.j4)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.Wm)(c,{type:"primary",onClick:u.getDatas},{default:(0,r.w5)((()=>[(0,r.Uk)("查询")])),_:1},8,["onClick"]),(0,r.Wm)(c,{class:"searchBtn",type:"primary",onClick:t[2]||(t[2]=e=>u.handleData("add"))},{default:(0,r.w5)((()=>[(0,r.Uk)("添 加")])),_:1})])),_:1},8,["model"])])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,{data:l.tableData,border:"",style:{width:"100%"},"header-cell-style":{background:"#F3F4F7",color:"#555"}},{default:(0,r.w5)((()=>[(0,r.Wm)(g,{prop:"name",label:"课程名称","min-width":"200"}),(0,r.Wm)(g,{prop:"department",label:"院系","min-width":"200"}),(0,r.Wm)(g,{prop:"grade",label:"年级","min-width":"200"}),(0,r.Wm)(g,{prop:"create_time",label:"创建时间","min-width":"200"}),(0,r.Wm)(g,{align:"center",fixed:"right",label:"操作",width:"200"},{default:(0,r.w5)((e=>[(0,r.Wm)(c,{type:"primary",onClick:t=>u.showCourseDetails(e.row._id)},{default:(0,r.w5)((()=>[(0,r.Uk)("详情")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),0!==l.tableData.length?((0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(w,{"current-page":l.currentPage,"page-size":l.pageSize,total:l.total,"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(k,{"modal-append-to-body":!1,modelValue:l.operaDialog,"onUpdate:modelValue":t[7]||(t[7]=e=>l.operaDialog=e),title:l.dialogTitle,onClose:u.resetForm},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{"status-icon":"",model:l.operaForm,ref:"operaForm",class:"operaDialog","label-width":"100px",rules:e.rules},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{label:"课程名称",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:l.operaForm.name,"onUpdate:modelValue":t[3]||(t[3]=e=>l.operaForm.name=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"学科",prop:"department"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:l.operaForm.department,"onUpdate:modelValue":t[4]||(t[4]=e=>l.operaForm.department=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"年级",prop:"grade"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:l.operaForm.grade,"onUpdate:modelValue":t[5]||(t[5]=e=>l.operaForm.grade=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(c,{type:"primary",onClick:t[6]||(t[6]=e=>u.submitForm())},{default:(0,r.w5)((()=>[(0,r.Uk)("提交")])),_:1}),(0,r.Wm)(c,{onClick:u.resetForm},{default:(0,r.w5)((()=>[(0,r.Uk)("取消")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","onClose"])])}a(7658);var l=a(7851),u={data(){return{tableData:[],isCollapse:!1,search:"",operaDialog:!1,dialogTitle:"",pageSize:10,total:0,currentPage:1,opera:"",operaForm:{},searchHeaderForm:{find:"",teacher_id:""},options:[{value:"",label:"全部"},{value:sessionStorage.getItem("user_id"),label:"仅自己"}]}},created(){this.getDatas(),this.getMsg()},methods:{desearch(){this.searchHeaderForm={find:""},this.getDatas()},handleData(e,t){"add"==e?(this.operaForm={},this.dialogTitle="添加API",this.opera="add"):"update"==e&&(this.operaForm={...t},//!!! 直接赋值是引用类型,引起表单重置问题
this.dialogTitle="编辑API",this.opera="update"),this.operaDialog=!0},handleSizeChange(e){this.pageSize=e,this.getDatas()},handleCurrentChange(e){this.currentPage=e,this.getDatas()},async getDatas(){const e={page:this.currentPage,page_size:this.pageSize,search:this.searchHeaderForm.find,teacher_id:this.searchHeaderForm.teacher_id},t=await(0,l.vn)(e);200===t.data.code&&(t.data.data?(this.total=t.data.data.count,null==t.data.data.data?this.tableData=[]:this.tableData=t.data.data.data):(this.total=t.data.data.count,this.tableData=[]))},async getMsg(){setTimeout((()=>{this.options[1].value=sessionStorage.getItem("user_id")}),100)},addData(){(0,l.qe)(this.operaForm).then((e=>{console.log(e),200===e.data.code&&(this.$message({showClose:!0,message:"创建成功",type:"success"}),this.operaDialog=!1,this.getDatas())}))},deleteData(e){(0,l.t8)({_id:e}).then((t=>{console.log(e),200===t.data.code&&(this.$message({showClose:!0,message:"删除成功",type:"success"}),this.operaDialog=!1,this.getDatas())}))},editData(){(0,l.Z9)(this.operaForm).then((e=>{200===e.data.code&&(this.$message({showClose:!0,message:e.data.msg,type:"success"}),this.operaDialog=!1,this.getDatas())}))},showCourseDetails(e){this.$router.push({path:"/teacher/courseDetails",query:{course_id:e}})},submitForm(){this.$refs.operaForm.validate((e=>{e?"add"===this.opera?this.addData():this.editData():this.$message({showClose:!0,message:"请根据要求将信息填写完整",type:"warning"})}))},resetForm(){this.$refs.operaForm.clearValidate(),this.operaForm={},this.operaDialog=!1}}},s=a(89);const d=(0,s.Z)(u,[["render",n],["__scopeId","data-v-58ca86e9"]]);var i=d}}]);
//# sourceMappingURL=30.46b84e6b.js.map