"use strict";(self["webpackChunkcheck_work_view"]=self["webpackChunkcheck_work_view"]||[]).push([[633],{4649:function(e,a,t){t.d(a,{$h:function(){return c},$l:function(){return y},Fq:function(){return W},HB:function(){return p},IT:function(){return k},It:function(){return R},J1:function(){return m},N5:function(){return F},Pk:function(){return C},Qg:function(){return D},Ts:function(){return i},UM:function(){return U},V0:function(){return _},Y$:function(){return u},Zo:function(){return w},bR:function(){return z},dv:function(){return P},f2:function(){return b},fM:function(){return o},m_:function(){return l},nG:function(){return S},pr:function(){return v},q0:function(){return f},qS:function(){return d},rG:function(){return $},rP:function(){return s},v3:function(){return g},vQ:function(){return H},vi:function(){return Z},vx:function(){return h},wM:function(){return x},wy:function(){return V},x4:function(){return n}});var r=t(8676);function n(e){return(0,r.Z)({url:"/manager/login",method:"post",data:e})}function o(){return(0,r.Z)({url:"/manager/getByToken",method:"get",params:{},data:{}})}function l(e){const a="/manager/manager/create";return r.Z.post(a,e)}function s(e){return console.log(e),(0,r.Z)({url:"/manager/manager/delete",method:"delete",params:e})}function u(e){const a="/manager/manager/update";return r.Z.put(a,e)}function d(e){const a="/manager/manager/update/password";return r.Z.put(a,e)}function i(e){return(0,r.Z)({url:"/manager/manager/resetPassword",method:"get",params:e,data:{}})}function m(e){return(0,r.Z)({url:"/manager/manager/find",method:"get",params:e})}function p(e){const a="/manager/function/create";return r.Z.post(a,e)}function c(e){return console.log(e),(0,r.Z)({url:"/manager/function/delete",method:"delete",params:e})}function h(e){const a="/manager/function/update";return r.Z.put(a,e)}function g(e){return(0,r.Z)({url:"/manager/function/find",method:"get",params:e})}function f(e){return(0,r.Z)({url:"/manager/function/findByRole",method:"get",params:e})}function w(e){const a="/manager/teacherRole/create";return r.Z.post(a,e)}function _(e){return console.log(e),(0,r.Z)({url:"/manager/teacherRole/delete",method:"delete",params:e})}function k(e){const a="/manager/teacherRole/update";return r.Z.put(a,e)}function b(e){return(0,r.Z)({url:"/manager/teacherRole/find",method:"get",params:e})}function y(e){const a="/manager/teacher/create";return r.Z.post(a,e)}function D(e){return console.log(e),(0,r.Z)({url:"/manager/teacher/delete",method:"delete",params:e})}function F(e){const a="/manager/teacher/update";return r.Z.put(a,e)}function Z(e){return(0,r.Z)({url:"/manager/teacher/update/password",method:"put",params:{},data:e})}function C(e){return(0,r.Z)({url:"/manager/teacher/find",method:"get",params:e,data:{}})}function W(e){return(0,r.Z)({url:"/manager/teacher/resetPassword",method:"get",params:e,data:{}})}function v(e){return(0,r.Z)({url:"/manager/class/create",method:"post",params:{},data:e})}function V(e){return(0,r.Z)({url:"/manager/class/delete",method:"delete",params:e,data:{}})}function U(e){return(0,r.Z)({url:"/manager/class/update",method:"put",params:{},data:e})}function z(e){return(0,r.Z)({url:"/manager/class/find",method:"get",params:e,data:{}})}function P(e){return(0,r.Z)({url:"/manager/student/create",method:"post",params:{},data:e})}function S(e){return(0,r.Z)({url:"/manager/student/delete",method:"delete",params:e,data:{}})}function $(e){return(0,r.Z)({url:"/manager/student/update",method:"put",params:{},data:e})}function x(e){return(0,r.Z)({url:"/manager/student/update/password",method:"put",params:{},data:e})}function R(e){return(0,r.Z)({url:"/manager/student/resetPassword",method:"get",params:e,data:{}})}function H(e){return(0,r.Z)({url:"/manager/student/find",method:"get",params:e,data:{}})}},8676:function(e,a,t){t.d(a,{Z:function(){return s}});t(7658);var r=t(4161);function n(){var e={token:sessionStorage.getItem("token"),user_id:sessionStorage.getItem("user_id"),type:sessionStorage.getItem("type")};return e}var o=t(7178);const l=r.Z.create({baseURL:"https://serve.xiongmaojiuxian.eu.org"});l.interceptors.request.use((e=>{var a=n();return""!=a.token&&(e.headers["token"]=a.token,e.headers["user_id"]=a.user_id,e.headers["type"]=a.type),e}),(e=>Promise.reject(e))),l.interceptors.response.use((e=>{if(console.log(e),401===e.data.code&&(console.log(1233),(0,o.z8)({message:e.data.msg,type:"error",duration:5e3}),router.push("/login")),400!==e.data.code)return e;(0,o.z8)({message:e.data.msg,type:"error",duration:5e3})}),(e=>{Promise.reject(e)}));var s=l},2847:function(e,a,t){t.r(a),t.d(a,{default:function(){return i}});var r=t(3396);const n={key:0,style:{display:"flex","flex-direction":"row-reverse","margin-top":"10px"}};function o(e,a,t,o,l,s){const u=(0,r.up)("el-input"),d=(0,r.up)("el-form-item"),i=(0,r.up)("el-button"),m=(0,r.up)("el-form"),p=(0,r.up)("el-card"),c=(0,r.up)("el-table-column"),h=(0,r.up)("el-table"),g=(0,r.up)("el-pagination"),f=(0,r.up)("el-option"),w=(0,r.up)("el-select"),_=(0,r.up)("el-dialog");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(p,{class:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{inline:!0,class:"headerForm",model:l.searchHeaderForm},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(u,{clearable:"",modelValue:l.searchHeaderForm.find,"onUpdate:modelValue":a[0]||(a[0]=e=>l.searchHeaderForm.find=e),placeholder:"请输入邮箱/名称/电话"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(i,{type:"primary",onClick:s.getDatas},{default:(0,r.w5)((()=>[(0,r.Uk)("查询")])),_:1},8,["onClick"]),(0,r.Wm)(i,{class:"searchBtn",type:"primary",onClick:a[1]||(a[1]=e=>s.handleData("add"))},{default:(0,r.w5)((()=>[(0,r.Uk)("添 加")])),_:1})])),_:1},8,["model"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,{data:l.tableData,border:"",style:{width:"100%"},"header-cell-style":{background:"#F3F4F7",color:"#555"}},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{prop:"name",label:"姓名","min-width":"200"}),(0,r.Wm)(c,{prop:"school_student_id",label:"学号","min-width":"200"}),(0,r.Wm)(c,{prop:"email",label:"邮箱","min-width":"200"}),(0,r.Wm)(c,{prop:"phone",label:"电话","min-width":"200"}),(0,r.Wm)(c,{prop:"class_name",label:"班级","min-width":"200"}),(0,r.Wm)(c,{prop:"create_time",label:"创建时间","min-width":"200"}),(0,r.Wm)(c,{align:"center",label:"密码","min-width":"200"},{default:(0,r.w5)((e=>[(0,r.Wm)(i,{type:"primary",onClick:a=>s.resetPassword(e.row._id)},{default:(0,r.w5)((()=>[(0,r.Uk)("重置密码")])),_:2},1032,["onClick"])])),_:1}),(0,r.Wm)(c,{align:"center",fixed:"right",label:"操作",width:"200"},{default:(0,r.w5)((e=>[(0,r.Wm)(i,{type:"primary",onClick:a=>s.handleData("update",e.row)},{default:(0,r.w5)((()=>[(0,r.Uk)("修改")])),_:2},1032,["onClick"]),(0,r.Wm)(i,{type:"danger",onClick:a=>s.deleteData(e.row._id)},{default:(0,r.w5)((()=>[(0,r.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),0!==l.tableData.length?((0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(g,{"current-page":l.currentPage,"page-size":l.pageSize,total:l.total,"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):(0,r.kq)("",!0)])),_:1}),(0,r.Wm)(_,{"modal-append-to-body":!1,modelValue:l.operaDialog,"onUpdate:modelValue":a[9]||(a[9]=e=>l.operaDialog=e),title:l.dialogTitle,onClose:s.resetForm},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{"status-icon":"",model:l.operaForm,ref:"operaForm",class:"operaDialog","label-width":"100px",rules:e.rules},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{label:"姓名",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:l.operaForm.name,"onUpdate:modelValue":a[2]||(a[2]=e=>l.operaForm.name=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"学号",prop:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:l.operaForm.school_student_id,"onUpdate:modelValue":a[3]||(a[3]=e=>l.operaForm.school_student_id=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"邮箱",prop:"email"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:l.operaForm.email,"onUpdate:modelValue":a[4]||(a[4]=e=>l.operaForm.email=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"电话",prop:"phone"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:l.operaForm.phone,"onUpdate:modelValue":a[5]||(a[5]=e=>l.operaForm.phone=e)},null,8,["modelValue"])])),_:1}),(0,r.Wm)(d,{label:"班级"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{modelValue:l.operaForm.class_id,"onUpdate:modelValue":a[6]||(a[6]=e=>l.operaForm.class_id=e),placeholder:"请选择班级",size:"large"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.options,(e=>((0,r.wg)(),(0,r.j4)(f,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),l.isupdate?((0,r.wg)(),(0,r.j4)(d,{key:0,label:"密码",prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{modelValue:l.operaForm.password,"onUpdate:modelValue":a[7]||(a[7]=e=>l.operaForm.password=e),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1})):(0,r.kq)("",!0),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{type:"primary",onClick:a[8]||(a[8]=e=>s.submitForm())},{default:(0,r.w5)((()=>[(0,r.Uk)("提交")])),_:1}),(0,r.Wm)(i,{onClick:s.resetForm},{default:(0,r.w5)((()=>[(0,r.Uk)("取消")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title","onClose"])])}t(7658);var l=t(4649),s={data(){return{tableData:[],isCollapse:!1,isupdate:!1,search:"",operaDialog:!1,dialogTitle:"",pageSize:10,total:0,currentPage:1,opera:"",operaForm:{name:"",school_student_id:"",phone:"",email:"",class_id:"",password:""},searchHeaderForm:{find:""},options:[]}},created(){this.getDatas(),this.getOptions()},methods:{desearch(){this.search="",this.getDatas()},handleData(e,a){"add"==e?(this.operaForm={},this.dialogTitle="添加学生",this.isupdate=!0,this.opera="add"):"update"==e&&(this.operaForm={...a},//!!! 直接赋值是引用类型,引起表单重置问题
this.dialogTitle="编辑学生信息",this.isupdate=!1,this.opera="update"),console.log(e),this.operaDialog=!0,console.log(this.operaDialog)},handleSizeChange(e){this.pageSize=e,this.getDatas()},handleCurrentChange(e){this.currentPage=e,this.getDatas()},async getDatas(){const e={page:this.currentPage,page_size:this.pageSize,search:this.searchHeaderForm.find},a=await(0,l.vQ)(e);200===a.data.code&&(a.data.data?(this.total=a.data.data.count,this.tableData=a.data.data.data,null==a.data.data.data&&(this.tableData=[])):(this.total=a.data.data.count,this.tableData=[]))},async getOptions(){const e=await(0,l.bR)();if(200===e.data.code)if(e.data.data){var a="",t="";for(let r=0;r<e.data.data.data.length;r++)a=e.data.data.data[r]._id,t=e.data.data.data[r].name,this.options.push({value:a,label:t})}else this.options=[]},addData(){(0,l.dv)(this.operaForm).then((e=>{console.log(e),200===e.data.code?(this.$message({showClose:!0,message:"创建成功",type:"success"}),this.operaDialog=!1,this.getDatas()):this.$message({showClose:!0,message:e.data.msg,type:"error"})}))},deleteData(e){(0,l.nG)({_id:e}).then((a=>{console.log(e),200===a.data.code&&(this.$message({showClose:!0,message:"删除成功",type:"success"}),this.operaDialog=!1,this.getDatas())}))},editData(){(0,l.rG)(this.operaForm).then((e=>{200===e.data.code&&(this.$message({showClose:!0,message:e.data.msg,type:"success"}),this.operaDialog=!1,this.getDatas())}))},submitForm(){this.$refs.operaForm.validate((e=>{e?"add"===this.opera?this.addData():this.editData():this.$message({showClose:!0,message:"请根据要求将信息填写完整",type:"warning"})}))},resetForm(){this.$refs.operaForm.clearValidate(),this.operaForm={},this.operaDialog=!1},resetPassword(e){(0,l.It)({_id:e}).then((e=>{200===e.data.code?this.$message({showClose:!0,message:"重置密码成功",type:"success"}):this.$message({showClose:!0,message:e.data.msg,type:"error"})}))}}},u=t(89);const d=(0,u.Z)(s,[["render",o],["__scopeId","data-v-d8aa386e"]]);var i=d}}]);
//# sourceMappingURL=633.bf41a72e.js.map