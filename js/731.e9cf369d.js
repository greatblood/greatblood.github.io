"use strict";(self["webpackChunkcheck_work_view"]=self["webpackChunkcheck_work_view"]||[]).push([[731],{7851:function(e,t,a){a.d(t,{DT:function(){return v},F:function(){return o},Q1:function(){return b},XG:function(){return u},Yy:function(){return D},Z9:function(){return p},cY:function(){return d},eb:function(){return U},f5:function(){return k},fM:function(){return n},h8:function(){return g},hJ:function(){return W},oW:function(){return y},qe:function(){return m},sH:function(){return i},sw:function(){return s},t8:function(){return w},tQ:function(){return c},vm:function(){return z},vn:function(){return f},x4:function(){return r},yT:function(){return Z},yw:function(){return _},zd:function(){return h}});var l=a(8676);function r(e){return(0,l.Z)({url:"/teacher/login",method:"post",params:{},data:e})}function n(){return(0,l.Z)({url:"/teacher/getByToken",method:"get",params:{},data:{}})}function i(e){return(0,l.Z)({url:"/work/title/create",method:"post",params:{},data:e})}function o(e){return(0,l.Z)({url:"/work/title/delete",method:"delete",params:e,data:{}})}function s(e){return(0,l.Z)({url:"/work/title/update",method:"put",params:{},data:e})}function u(e){return(0,l.Z)({url:"/work/title/find",method:"get",params:e,data:{}})}function d(e){return(0,l.Z)({url:"/work/title/details",method:"get",params:e,data:{}})}function c(e){return(0,l.Z)({url:"/work/title/publish",method:"post",params:{},data:e})}function m(e){return(0,l.Z)({url:"/work/course/create",method:"post",params:{},data:e})}function w(e){return(0,l.Z)({url:"/work/course/delete",method:"delete",params:e,data:{}})}function p(e){return(0,l.Z)({url:"/work/course/update",method:"put",params:{},data:e})}function f(e){return(0,l.Z)({url:"/work/course/find",method:"get",params:e,data:{}})}function _(e){return(0,l.Z)({url:"/work/course/show/student",method:"get",params:e,data:{}})}function h(e){return(0,l.Z)({url:"/work/course/exitByTeacher",method:"delete",params:e,data:{}})}function k(e){return(0,l.Z)({url:"/work/course/details",method:"get",params:e,data:{}})}function g(e){return(0,l.Z)({url:"/work/work/findByTeacher",method:"get",params:e,data:{}})}function y(e){return(0,l.Z)({url:"/work/work/show/student",method:"get",params:e,data:{}})}function W(e){return(0,l.Z)({url:"/work/course/role/create",method:"post",params:{},data:e})}function U(e){return(0,l.Z)({url:"/work/course/role/delete",method:"delete",params:e,data:{}})}function b(e){return(0,l.Z)({url:"/work/course/role/update",method:"put",params:{},data:e})}function z(e){return(0,l.Z)({url:"/work/course/role/find",method:"get",params:e,data:{}})}function v(e){return(0,l.Z)({url:"/manager/function/findByCourse",method:"get",params:e})}function Z(e){return(0,l.Z)({url:"/work/course/update/student/role",method:"put",params:{},data:e})}function D(e){return(0,l.Z)({url:"/work/work/answer/details/teacher",method:"get",params:e,data:{}})}},5731:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var l=a(3396),r=a(7139);const n=e=>((0,l.dD)("data-v-6db47444"),e=e(),(0,l.Cn)(),e),i={class:"cell-item"},o={class:"cell-item"},s={class:"cell-item"},u={class:"cell-item"},d={class:"cell-item"},c={class:"cell-item"},m={class:"cell-item"},w={key:0,style:{display:"flex","flex-direction":"row-reverse","margin-top":"10px"}},p={class:"cell-item"},f={class:"cell-item"},_={class:"cell-item"},h={class:"cell-item"},k={class:"cell-item"},g={style:{float:"right"}},y={class:"cell-item"},W={class:"demo-image__preview"},U=n((()=>(0,l._)("div",{class:"el-upload__text"}," 上传答题结果zip ",-1)));function b(e,t,a,n,b,z){const v=(0,l.up)("user"),Z=(0,l.up)("el-icon"),D=(0,l.up)("el-descriptions-item"),j=(0,l.up)("iphone"),C=(0,l.up)("location"),S=(0,l.up)("tickets"),F=(0,l.up)("office-building"),x=(0,l.up)("el-descriptions"),q=(0,l.up)("el-card"),V=(0,l.up)("el-input"),P=(0,l.up)("el-form-item"),T=(0,l.up)("el-button"),H=(0,l.up)("el-form"),B=(0,l.up)("el-table-column"),L=(0,l.up)("el-tag"),I=(0,l.up)("el-table"),$=(0,l.up)("el-pagination"),M=(0,l.up)("Document"),Y=(0,l.up)("el-image"),R=(0,l.up)("el-dialog"),Q=(0,l.up)("upload-filled"),E=(0,l.up)("el-link"),G=(0,l.up)("el-upload");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"margin-top",title:"作业信息",column:2,size:e.size,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(v)])),_:1},8,["style"]),(0,l.Uk)(" 题目 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.work.title_name),1)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(j)])),_:1},8,["style"]),(0,l.Uk)(" 出题老师 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.work.teacher_name),1)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(C)])),_:1},8,["style"]),(0,l.Uk)(" 课程 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.work.course_name),1)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(S)])),_:1},8,["style"]),(0,l.Uk)(" 完成情况 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.work.completion_degree),1)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(F)])),_:1},8,["style"]),(0,l.Uk)(" 开始时间 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.work.start_time),1)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(S)])),_:1},8,["style"]),(0,l.Uk)(" 结束时间 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.work.end_time),1)])),_:1})])),_:1},8,["size"]),(0,l.Wm)(x,{direction:"vertical",column:1,size:e.size,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(F)])),_:1},8,["style"]),(0,l.Uk)(" 内容 ")])])),default:(0,l.w5)((()=>[(0,l._)("pre",null,(0,r.zw)(b.work.title_content),1)])),_:1})])),_:1},8,["size"])])),_:1}),(0,l.Wm)(q,{class:"header"},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{inline:!0,class:"headerForm",model:b.searchHeaderForm},{default:(0,l.w5)((()=>[(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Wm)(V,{clearable:"",modelValue:b.searchHeaderForm.find,"onUpdate:modelValue":t[0]||(t[0]=e=>b.searchHeaderForm.find=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(T,{type:"primary",onClick:z.getDatas},{default:(0,l.w5)((()=>[(0,l.Uk)("查询")])),_:1},8,["onClick"]),(0,l.Wm)(T,{class:"searchBtn",type:"primary",onClick:z.submitImport},{default:(0,l.w5)((()=>[(0,l.Uk)("导入作业")])),_:1},8,["onClick"])])),_:1},8,["model"])])),_:1}),(0,l.Wm)(q,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,{data:b.tableData,border:"",style:{width:"100%"},"header-cell-style":{background:"#F3F4F7",color:"#555"}},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{prop:"name",label:"学生名称","min-width":"200"}),(0,l.Wm)(B,{prop:"class_name",label:"班级","min-width":"200"}),(0,l.Wm)(B,{prop:"school_student_id",label:"学号","min-width":"200"}),(0,l.Wm)(B,{prop:"isUpdate",label:"是否上传作业","min-width":"200"},{default:(0,l.w5)((e=>[(0,l.Wm)(L,{type:!1===e.row.isUpdate?"error":"success","disable-transitions":""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.row.isUpdate),1)])),_:2},1032,["type"])])),_:1}),(0,l.Wm)(B,{align:"center",fixed:"right",label:"操作",width:"200"},{default:(0,l.w5)((e=>[(0,l.Wm)(T,{type:"primary",onClick:t=>z.showDetails(e.row),disabled:0==e.row.isUpdate},{default:(0,l.w5)((()=>[(0,l.Uk)("详情")])),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data"]),0!==b.tableData.length?((0,l.wg)(),(0,l.iD)("div",w,[(0,l.Wm)($,{"current-page":b.currentPage,"page-size":b.pageSize,total:b.total,"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(R,{"modal-append-to-body":!1,modelValue:b.operaDialog,"onUpdate:modelValue":t[2]||(t[2]=e=>b.operaDialog=e),title:e.dialogTitle,onClose:e.resetForm},{default:(0,l.w5)((()=>[e.isUpload?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(x,{key:0,class:"margin-top",title:"回答信息",column:2,size:e.size,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(j)])),_:1},8,["style"]),(0,l.Uk)(" 上传方式 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.answer.content_msg.work_type),1)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(F)])),_:1},8,["style"]),(0,l.Uk)(" 作业查重情况 ")])])),default:(0,l.w5)((()=>[-2==b.answer.hamming_distance?((0,l.wg)(),(0,l.j4)(L,{key:0,size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("待查重")])),_:1})):(0,l.kq)("",!0),-1==b.answer.hamming_distance?((0,l.wg)(),(0,l.j4)(L,{key:1,type:"success",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)("没有抄袭")])),_:1})):(0,l.kq)("",!0),b.answer.hamming_distance>-1&&b.answer.hamming_distance<4?((0,l.wg)(),(0,l.j4)(L,{key:2,type:"danger",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 海明距离："+(0,r.zw)(b.answer.hamming_distance)+"，认定为抄袭",1)])),_:1})):(0,l.kq)("",!0),b.answer.hamming_distance>3?((0,l.wg)(),(0,l.j4)(L,{key:3,type:"warning",size:"small"},{default:(0,l.w5)((()=>[(0,l.Uk)(" 海明距离："+(0,r.zw)(b.answer.hamming_distance)+"，可能为抄袭",1)])),_:1})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",_,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(C)])),_:1},8,["style"]),(0,l.Uk)(" 首次上传时间 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.answer.create_time),1)])),_:1}),(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",h,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(S)])),_:1},8,["style"]),(0,l.Uk)(" 修改时间 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(b.answer.update_time),1)])),_:1})])),_:1},8,["size"])),b.isUploadFile?((0,l.wg)(),(0,l.j4)(x,{key:1,direction:"vertical",column:1,size:e.size,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",k,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(F)])),_:1},8,["style"]),(0,l.Uk)(" 文件 ")])])),default:(0,l.w5)((()=>[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(M)])),_:1},8,["style"]),(0,l.Uk)(" "+(0,r.zw)(b.answer.content_msg.file_name)+" ",1),(0,l._)("div",g,[(0,l.Wm)(T,{type:"primary",onClick:t[1]||(t[1]=e=>z.downloadFile())},{default:(0,l.w5)((()=>[(0,l.Uk)("下载")])),_:1})])])),_:1})])),_:1},8,["size"])):(0,l.kq)("",!0),b.isUploadPic?((0,l.wg)(),(0,l.j4)(x,{key:2,direction:"vertical",column:1,size:e.size,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{label:(0,l.w5)((()=>[(0,l._)("div",y,[(0,l.Wm)(Z,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(F)])),_:1},8,["style"]),(0,l.Uk)(" 图片 ")])])),default:(0,l.w5)((()=>[(0,l._)("div",W,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.answer.content_msg.pic_url,(e=>((0,l.wg)(),(0,l.j4)(Y,{style:{width:"100px",height:"100px","margin-left":"20px"},src:e,"preview-src-list":[e],"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])))),256))])])),_:1})])),_:1},8,["size"])):(0,l.kq)("",!0)])),_:1},8,["modelValue","title","onClose"]),(0,l.Wm)(R,{"modal-append-to-body":!1,modelValue:b.studentDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>b.studentDialog=e),title:e.dialogTitle,onClose:e.resetFormRole},{default:(0,l.w5)((()=>[(0,l.Wm)(G,{drag:"","file-list":b.fileList,"onUpdate:fileList":t[3]||(t[3]=e=>b.fileList=e),name:"file",action:"http://127.0.0.1:11002/work/work/answer/upload/zip",headers:b.headers,"on-success":e.uploadfileSuccess},{tip:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(E,{type:"primary",href:"http://101.200.87.232:19000/example/importStudent.xlsx"},{default:(0,l.w5)((()=>[(0,l.Uk)("模板文件下载")])),_:1})])])),default:(0,l.w5)((()=>[(0,l.Wm)(Z,{class:"el-icon--upload"},{default:(0,l.w5)((()=>[(0,l.Wm)(Q)])),_:1}),U])),_:1},8,["file-list","headers","on-success"])])),_:1},8,["modelValue","title","onClose"])])}a(6797);var z=a(7851),v=a(4161),Z={data(){return{work:{},tableData:[],headers:{token:sessionStorage.getItem("token"),user_id:sessionStorage.getItem("user_id"),work_id:this.$route.query.work_id},studentDialog:!1,isMycourse:!1,operaDialog:!1,pageSize:10,total:0,currentPage:1,searchHeaderForm:{find:""},answer:{hamming_distance:"",hash_64:"",create_time:"",update_time:"",content_msg:{content:"",file_name:"",file_url:"",pic_url:[],work_type:0}},fileList:[],isUploadPic:!1,isUploadFile:!1}},created(){this.getUserMessage()},methods:{async getUserMessage(){var e=this.$route.query.work_id;(0,z.h8)({work_id:e}).then((e=>{200!=e.data.code?this.$message.error(e.data.msg):(this.work=e.data.data.data[0],this.getDatas())}))},async getDatas(){const e={work_id:this.$route.query.work_id,page:this.currentPage,page_size:this.pageSize,search:this.searchHeaderForm.find},t=await(0,z.oW)(e);200===t.data.code&&(t.data.data?(this.total=t.data.data.count,null==t.data.data.data?this.tableData=[]:this.tableData=t.data.data.data):(this.total=t.data.data.count,this.tableData=[]))},uploadWorkFile(){},showDetails(e){this.operaDialog=!0;var t={student_id:e._id,work_id:this.work._id};(0,z.Yy)(t).then((e=>{if(200!=e.data.code)this.$message.error(e.data.msg);else{var t=e.data.data;1==t.content_msg.work_type&&(t.content_msg.work_type="上传文字",this.isUploadFile=!1,this.isUploadPic=!1),2==t.content_msg.work_type&&(t.content_msg.work_type="上传文件",this.isUploadFile=!0,this.isUploadPic=!1),3==t.content_msg.work_type&&(t.content_msg.work_type="上传图片",this.isUploadFile=!1,this.isUploadPic=!0),this.answer=t}}))},downloadFile(){var e=this.answer.content_msg.file_url,t=this.answer.content_msg.file_name;v.Z.get(this.answer.content_msg.file_url),(0,v.Z)({method:"get",url:e,responseType:"blob"}).then((function(e){const a=document.createElement("a");let l=new Blob([e.data],{type:e.data.type}),r=URL.createObjectURL(l);a.href=r,a.download=t,a.click()}))},submitImport(){this.studentDialog=!0}}},D=a(89);const j=(0,D.Z)(Z,[["render",b],["__scopeId","data-v-6db47444"]]);var C=j}}]);
//# sourceMappingURL=731.e9cf369d.js.map