"use strict";(self["webpackChunkcheck_work_view"]=self["webpackChunkcheck_work_view"]||[]).push([[499],{344:function(e,t,a){a.d(t,{Bv:function(){return p},HD:function(){return h},Li:function(){return u},Ll:function(){return i},bR:function(){return m},dv:function(){return n},fM:function(){return s},h8:function(){return c},kn:function(){return d},x4:function(){return o},zd:function(){return l}});var r=a(8676);function o(e){return(0,r.Z)({url:"/student/login",method:"post",data:e})}function n(e){return(0,r.Z)({url:"/student/student/create",method:"post",data:e})}function s(){return(0,r.Z)({url:"/student/getByToken",method:"get",params:{},data:{}})}function i(){return(0,r.Z)({url:"/dashboard/student",method:"get",params:{},data:{}})}function d(e){return(0,r.Z)({url:"/work/course/find/student",method:"get",params:e,data:{}})}function u(e){return(0,r.Z)({url:"/work/course/join",method:"post",params:{},data:e})}function l(e){return(0,r.Z)({url:"/work/course/exitByStudent",method:"delete",params:e,data:{}})}function c(e){return(0,r.Z)({url:"/work/work/find",method:"get",params:e,data:{}})}function h(e){return(0,r.Z)({url:"/work/work/upload",method:"post",data:e})}function p(e){return(0,r.Z)({url:"/work/work/answer/details",method:"get",params:e,data:{}})}function m(e){return(0,r.Z)({url:"/manager/class/find",method:"get",params:e})}},8676:function(e,t,a){a.d(t,{Z:function(){return i}});a(7658);var r=a(4161);function o(){var e={token:sessionStorage.getItem("token"),user_id:sessionStorage.getItem("user_id"),type:sessionStorage.getItem("type")};return e}var n=a(7178);const s=r.Z.create({baseURL:"https://serve.xiongmaojiuxian.eu.org"});s.interceptors.request.use((e=>{var t=o();return""!=t.token&&(e.headers["token"]=t.token,e.headers["user_id"]=t.user_id,e.headers["type"]=t.type),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>{if(console.log(e),401===e.data.code&&(console.log(1233),(0,n.z8)({message:e.data.msg,type:"error",duration:5e3}),router.push("/login")),400!==e.data.code)return e;(0,n.z8)({message:e.data.msg,type:"error",duration:5e3})}),(e=>{Promise.reject(e)}));var i=s},3499:function(e,t,a){a.r(t),a.d(t,{default:function(){return l}});var r=a(3396);const o={key:0,style:{display:"flex","flex-direction":"row-reverse","margin-top":"10px"}};function n(e,t,a,n,s,i){const d=(0,r.up)("el-input"),u=(0,r.up)("el-form-item"),l=(0,r.up)("el-button"),c=(0,r.up)("el-form"),h=(0,r.up)("el-card"),p=(0,r.up)("el-table-column"),m=(0,r.up)("el-table"),g=(0,r.up)("el-pagination");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(h,{class:"header"},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{inline:!0,class:"headerForm",model:s.searchHeaderForm},{default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,{clearable:"",modelValue:s.searchHeaderForm.find,"onUpdate:modelValue":t[0]||(t[0]=e=>s.searchHeaderForm.find=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(l,{type:"primary",onClick:i.getDatas},{default:(0,r.w5)((()=>[(0,r.Uk)("查询")])),_:1},8,["onClick"])])),_:1},8,["model"])])),_:1}),(0,r.Wm)(h,null,{default:(0,r.w5)((()=>[(0,r.Wm)(m,{data:s.tableData,border:"",style:{width:"100%"},"header-cell-style":{background:"#F3F4F7",color:"#555"}},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{prop:"name",label:"课程名称","min-width":"200"}),(0,r.Wm)(p,{prop:"department",label:"院系","min-width":"200"}),(0,r.Wm)(p,{prop:"grade",label:"年级","min-width":"200"}),(0,r.Wm)(p,{prop:"create_time",label:"创建时间","min-width":"200"}),(0,r.Wm)(p,{align:"center",fixed:"right",label:"操作",width:"200"},{default:(0,r.w5)((e=>[(0,r.Wm)(l,{type:"primary",onClick:t=>i.showCourseDetails(e.row._id)},{default:(0,r.w5)((()=>[(0,r.Uk)("详情")])),_:2},1032,["onClick"]),0==e.row.isAdd?((0,r.wg)(),(0,r.j4)(l,{key:0,type:"success",onClick:t=>i.join(e.row)},{default:(0,r.w5)((()=>[(0,r.Uk)("加入")])),_:2},1032,["onClick"])):(0,r.kq)("",!0),1==e.row.isAdd?((0,r.wg)(),(0,r.j4)(l,{key:1,type:"danger",onClick:t=>i.exit(e.row._id)},{default:(0,r.w5)((()=>[(0,r.Uk)("退出")])),_:2},1032,["onClick"])):(0,r.kq)("",!0)])),_:1})])),_:1},8,["data"]),0!==s.tableData.length?((0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(g,{"current-page":s.currentPage,"page-size":s.pageSize,total:s.total,"page-sizes":[10,20,50,100],background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])):(0,r.kq)("",!0)])),_:1})])}a(7658);var s=a(344),i={data(){return{tableData:[],isCollapse:!1,search:"",operaDialog:!1,dialogTitle:"",pageSize:10,total:0,currentPage:1,opera:"",operaForm:{name:"",department:"",grade:""},searchHeaderForm:{find:""},options:[]}},created(){this.getDatas()},methods:{desearch(){this.searchHeaderForm={find:""},this.getDatas()},handleData(e,t){"add"==e?(this.operaForm={},this.dialogTitle="添加API",this.opera="add"):"update"==e&&(this.operaForm={...t},//!!! 直接赋值是引用类型,引起表单重置问题
this.dialogTitle="编辑API",this.opera="update"),this.operaDialog=!0},handleSizeChange(e){this.pageSize=e,this.getDatas()},handleCurrentChange(e){this.currentPage=e,this.getDatas()},async getDatas(){const e={page:this.currentPage,page_size:this.pageSize,search:this.searchHeaderForm.find},t=await(0,s.kn)(e);200===t.data.code&&(t.data.data?(this.total=t.data.data.count,null==t.data.data.data?this.tableData=[]:this.tableData=t.data.data.data):(this.total=t.data.data.count,this.tableData=[]))},join(e){var t={course_id:e._id,role_id:e.default_role_id};(0,s.Li)(t).then((e=>{200===e.data.code&&(this.$message({showClose:!0,message:"加入成功",type:"success"}),this.operaDialog=!1,this.getDatas())}))},exit(e){(0,s.zd)({course_id:e}).then((e=>{200===e.data.code&&(this.$message({showClose:!0,message:"退出成功",type:"success"}),this.operaDialog=!1,this.getDatas())}))},showCourseDetails(e){this.$router.push({path:"/student/courseDetails",query:{course_id:e}})},resetForm(){this.$refs.operaForm.clearValidate(),this.operaForm={},this.operaDialog=!1}}},d=a(89);const u=(0,d.Z)(i,[["render",n],["__scopeId","data-v-4e8d08d2"]]);var l=u}}]);
//# sourceMappingURL=499.0493a93c.js.map