"use strict";(self["webpackChunkcheck_work_view"]=self["webpackChunkcheck_work_view"]||[]).push([[791],{7851:function(e,t,a){a.d(t,{DT:function(){return v},F:function(){return n},Q1:function(){return F},XG:function(){return s},Yy:function(){return V},Z9:function(){return f},cY:function(){return i},eb:function(){return b},f5:function(){return k},fM:function(){return o},h8:function(){return g},hJ:function(){return W},oW:function(){return y},qe:function(){return p},sH:function(){return u},sw:function(){return d},t8:function(){return c},tQ:function(){return m},vm:function(){return U},vn:function(){return w},x4:function(){return r},yT:function(){return Z},yw:function(){return h},zd:function(){return _}});var l=a(8676);function r(e){return(0,l.Z)({url:"/teacher/login",method:"post",params:{},data:e})}function o(){return(0,l.Z)({url:"/teacher/getByToken",method:"get",params:{},data:{}})}function u(e){return(0,l.Z)({url:"/work/title/create",method:"post",params:{},data:e})}function n(e){return(0,l.Z)({url:"/work/title/delete",method:"delete",params:e,data:{}})}function d(e){return(0,l.Z)({url:"/work/title/update",method:"put",params:{},data:e})}function s(e){return(0,l.Z)({url:"/work/title/find",method:"get",params:e,data:{}})}function i(e){return(0,l.Z)({url:"/work/title/details",method:"get",params:e,data:{}})}function m(e){return(0,l.Z)({url:"/work/title/publish",method:"post",params:{},data:e})}function p(e){return(0,l.Z)({url:"/work/course/create",method:"post",params:{},data:e})}function c(e){return(0,l.Z)({url:"/work/course/delete",method:"delete",params:e,data:{}})}function f(e){return(0,l.Z)({url:"/work/course/update",method:"put",params:{},data:e})}function w(e){return(0,l.Z)({url:"/work/course/find",method:"get",params:e,data:{}})}function h(e){return(0,l.Z)({url:"/work/course/show/student",method:"get",params:e,data:{}})}function _(e){return(0,l.Z)({url:"/work/course/exitByTeacher",method:"delete",params:e,data:{}})}function k(e){return(0,l.Z)({url:"/work/course/details",method:"get",params:e,data:{}})}function g(e){return(0,l.Z)({url:"/work/work/findByTeacher",method:"get",params:e,data:{}})}function y(e){return(0,l.Z)({url:"/work/work/show/student",method:"get",params:e,data:{}})}function W(e){return(0,l.Z)({url:"/work/course/role/create",method:"post",params:{},data:e})}function b(e){return(0,l.Z)({url:"/work/course/role/delete",method:"delete",params:e,data:{}})}function F(e){return(0,l.Z)({url:"/work/course/role/update",method:"put",params:{},data:e})}function U(e){return(0,l.Z)({url:"/work/course/role/find",method:"get",params:e,data:{}})}function v(e){return(0,l.Z)({url:"/manager/function/findByCourse",method:"get",params:e})}function Z(e){return(0,l.Z)({url:"/work/course/update/student/role",method:"put",params:{},data:e})}function V(e){return(0,l.Z)({url:"/work/work/answer/details/teacher",method:"get",params:e,data:{}})}},9791:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var l=a(3396),r=a(7139);const o={class:"cell-item"},u={class:"cell-item"},n={class:"cell-item"},d={class:"cell-item"},s={class:"cell-item"},i={class:"cell-item"},m={class:"cell-item"},p={class:"cell-item"};function c(e,t,a,c,f,w){const h=(0,l.up)("el-button"),_=(0,l.up)("iphone"),k=(0,l.up)("el-icon"),g=(0,l.up)("el-descriptions-item"),y=(0,l.up)("office-building"),W=(0,l.up)("location"),b=(0,l.up)("tickets"),F=(0,l.up)("el-descriptions"),U=(0,l.up)("el-card"),v=(0,l.up)("el-form-item"),Z=(0,l.up)("el-option"),V=(0,l.up)("el-select"),D=(0,l.up)("el-date-picker"),C=(0,l.up)("el-form"),z=(0,l.up)("el-dialog"),O=(0,l.up)("el-input"),S=(0,l.up)("el-switch");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(U,null,{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"margin-top",title:"题目信息",column:2,size:e.size,border:""},{extra:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"primary",onClick:w.onupdate},{default:(0,l.w5)((()=>[(0,l.Uk)("修改信息")])),_:1},8,["onClick"]),(0,l.Wm)(h,{type:"success",onClick:t[0]||(t[0]=e=>w.onSubmit())},{default:(0,l.w5)((()=>[(0,l.Uk)("发布")])),_:1})])),default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",o,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(_)])),_:1},8,["style"]),(0,l.Uk)(" 题目名称 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(f.title.name),1)])),_:1}),(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(y)])),_:1},8,["style"]),(0,l.Uk)(" 创建老师 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(f.title.create_teacher_name),1)])),_:1}),(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(W)])),_:1},8,["style"]),(0,l.Uk)(" 最后修改老师 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(f.title.update_teacher_name),1)])),_:1}),(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(b)])),_:1},8,["style"]),(0,l.Uk)(" 学科 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(f.title.subject),1)])),_:1}),(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(b)])),_:1},8,["style"]),(0,l.Uk)(" 是否将题目公开 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(f.title.open_type),1)])),_:1}),(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(b)])),_:1},8,["style"]),(0,l.Uk)(" 创建时间 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(f.title.create_time),1)])),_:1}),(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(b)])),_:1},8,["style"]),(0,l.Uk)(" 修改时间 ")])])),default:(0,l.w5)((()=>[(0,l.Uk)(" "+(0,r.zw)(f.title.update_time),1)])),_:1})])),_:1},8,["size"]),(0,l.Wm)(F,{direction:"vertical",column:1,size:e.size,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{label:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l.Wm)(k,{style:(0,r.j5)(e.iconStyle)},{default:(0,l.w5)((()=>[(0,l.Wm)(y)])),_:1},8,["style"]),(0,l.Uk)(" 内容 ")])])),default:(0,l.w5)((()=>[(0,l._)("pre",null,(0,r.zw)(f.title.content),1)])),_:1})])),_:1},8,["size"])])),_:1}),(0,l.Wm)(z,{"modal-append-to-body":!1,modelValue:f.operaDialog,"onUpdate:modelValue":t[4]||(t[4]=e=>f.operaDialog=e),title:"发布题目",onClose:w.resetForm},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{"status-icon":"",model:f.operaForm,ref:"operaForm",class:"operaDialog","label-width":"100px",rules:e.rules},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{label:"题目名称",prop:"name"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(f.operaForm.name),1)])),_:1}),(0,l.Wm)(v,{label:"课程",prop:"course_id"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:f.operaForm.course_id,"onUpdate:modelValue":t[1]||(t[1]=e=>f.operaForm.course_id=e),placeholder:"请选择课程",size:"large"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.options,(e=>((0,l.wg)(),(0,l.j4)(Z,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(v,{label:"答题时间",prop:"open_type"},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{modelValue:f.pushTime,"onUpdate:modelValue":t[2]||(t[2]=e=>f.pushTime=e),type:"datetimerange","range-separator":"到","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"primary",onClick:t[3]||(t[3]=e=>w.publish(f.operaForm))},{default:(0,l.w5)((()=>[(0,l.Uk)("提交")])),_:1}),(0,l.Wm)(h,{onClick:w.resetForm},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onClose"]),(0,l.Wm)(z,{"modal-append-to-body":!1,modelValue:f.updateDialog,"onUpdate:modelValue":t[10]||(t[10]=e=>f.updateDialog=e),title:"修改题目信息",onClose:w.updateresetForm},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{"status-icon":"",model:f.updateOperaForm,ref:"updateOperaForm",class:"updateDialog","label-width":"100px",rules:e.rules},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{label:"题目名称",prop:"name"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{modelValue:f.updateOperaForm.name,"onUpdate:modelValue":t[5]||(t[5]=e=>f.updateOperaForm.name=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(v,{label:"学科",prop:"subject"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{modelValue:f.updateOperaForm.subject,"onUpdate:modelValue":t[6]||(t[6]=e=>f.updateOperaForm.subject=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(v,{label:"是否公开",prop:"open_type"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{modelValue:f.updateOperaForm.open_type,"onUpdate:modelValue":t[7]||(t[7]=e=>f.updateOperaForm.open_type=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(v,{label:"内容",prop:"content"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{type:"textarea",modelValue:f.updateOperaForm.content,"onUpdate:modelValue":t[8]||(t[8]=e=>f.updateOperaForm.content=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{type:"primary",onClick:t[9]||(t[9]=e=>w.updateSubmitForm())},{default:(0,l.w5)((()=>[(0,l.Uk)("提交")])),_:1}),(0,l.Wm)(h,{onClick:w.updateresetForm},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onClose"])])}a(7658);var f=a(6797),w=a.n(f),h=a(7851),_={data(){return{title:{},tableData:[],pageSize:10,total:0,currentPage:1,pushTime:["",""],options:[],updateDialog:!1,operaDialog:!1,operaForm:{name:"",course_id:"",title_id:"",start_time:"",end_time:""},updateOperaForm:{name:"",course_id:"",title_id:"",start_time:"",end_time:""}}},created(){this.getUserMessage(),this.getOptions()},methods:{async getUserMessage(){var e=this.$route.query.title_id;(0,h.cY)({_id:e}).then((e=>{200!=e.data.code?this.$message.error(e.data.msg):(console.log(e),this.title=e.data.data,console.log(this.title))}))},async getOptions(){const e={teacher_id:sessionStorage.getItem("user_id")},t=await(0,h.vn)(e);if(200===t.data.code)if(t.data.data){var a="",l="";for(let e=0;e<t.data.data.data.length;e++)a=t.data.data.data[e]._id,l=t.data.data.data[e].name,this.options.push({value:a,label:l})}else this.options=[]},onSubmit(){this.operaForm.name=this.title.name,this.operaForm.title_id=this.title._id,this.operaDialog=!0},publish(e){e.start_time=w()(this.pushTime[0]).format("YYYY-MM-DD HH:mm:ss"),e.end_time=w()(this.pushTime[1]).format("YYYY-MM-DD HH:mm:ss"),(0,h.tQ)(e).then((e=>{200===e.data.code?(this.$message({showClose:!0,message:e.data.msg,type:"success"}),this.operaDialog=!1):this.$message({showClose:!0,message:e.data.msg,type:"error"})}))},resetForm(){this.$refs.operaForm.clearValidate(),this.operaForm={},this.operaDialog=!1},onupdate(){this.updateDialog=!0,this.updateOperaForm={...this.title}},updateresetForm(){this.updateDialog=!1,this.updateOperaForm={}},updateSubmitForm(){(0,h.sw)(this.updateOperaForm).then((e=>{200===e.data.code?this.$message({showClose:!0,message:"修改成功",type:"success"}):this.$message({showClose:!0,message:e.data.msg,type:"error"}),this.getUserMessage(),this.updateDialog=!1}))}}},k=a(89);const g=(0,k.Z)(_,[["render",c],["__scopeId","data-v-6099d2a9"]]);var y=g}}]);
//# sourceMappingURL=791.8f5e2d1b.js.map